import axios from 'axios';
import { useState, useEffect } from 'react';
/**
 * Gets a tokenlist (see more at https://tokenlists.org/), returning the .tokens only
 *
 * ~ How can I use? ~
  const tokenList = useTokenList(); <- default returns the Unsiwap tokens
  const tokenList = useTokenList("https://gateway.ipfs.io/ipns/tokens.uniswap.org");
 * @param tokenListUri (string)
 * @param chainId (number)
 * @returns (TokenInfo[])
 */
export const useTokenList = (tokenListUri = 'https://gateway.ipfs.io/ipns/tokens.uniswap.org', chainId) => {
    const [tokenList, setTokenList] = useState([]);
    useEffect(() => {
        const getTokenList = async () => {
            try {
                const tokenListResp = (await axios(tokenListUri)).data;
                if (tokenListResp != null) {
                    let tokenInfo = [];
                    if (chainId) {
                        tokenInfo = tokenListResp.tokens.filter((t) => {
                            return t.chainId === chainId;
                        });
                    }
                    else {
                        tokenInfo = tokenListResp.tokens;
                    }
                    setTokenList(tokenInfo);
                }
            }
            catch (e) {
                console.log(e);
            }
        };
        void getTokenList();
    }, [chainId, tokenListUri]);
    return tokenList;
};
