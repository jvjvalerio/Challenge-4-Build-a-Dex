import { useCallback, useState } from 'react';
import { useOnRepetition } from "./useOnRepetition";
/**
 * Get the current block number of the network
 * @param provider (TEthersProvider)
 * @param pollTime (number) :: if >0 use polling, else use instead of onBlock event
 * @returns (number) :: block number
 */
export const useBlockNumber = (provider, pollTime = 0) => {
    const [blockNumber, setBlockNumber] = useState(0);
    const getBlockNumber = useCallback(async () => {
        const nextBlockNumber = await provider.getBlockNumber();
        if (nextBlockNumber !== blockNumber) {
            setBlockNumber(nextBlockNumber);
        }
    }, [blockNumber, provider]);
    useOnRepetition(getBlockNumber, { provider, pollTime });
    return blockNumber;
};
