{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // some imports must use wildcard for it to work with rollupjs\n\nconst _privToAddress = __importStar(require(\"ethereum-private-key-to-address\"));\n\nconst ethers = __importStar(require(\"ethers\"));\n\nconst to_hex_1 = __importDefault(require(\"to-hex\"));\n\nconst uuidlib = __importStar(require(\"uuidv4\"));\n\nconst querystring_1 = __importDefault(require(\"querystring\"));\n\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n\nconst {\n  uuid\n} = uuidlib;\nexports.uuidv4 = uuid;\nexports.privateKeyToAddress = _privToAddress;\n\nexports.wait = t => __awaiter(void 0, void 0, void 0, function* () {\n  return new Promise(resolve => setTimeout(() => resolve(), t));\n});\n\nexports.toHex = (value, opts = {}) => {\n  if (opts.addPrefix === undefined) {\n    opts.addPrefix = true;\n  }\n\n  opts.default = 0;\n  return to_hex_1.default(value, opts);\n};\n\nexports.signWithPrivateKey = (message, privateKey, providerUri) => __awaiter(void 0, void 0, void 0, function* () {\n  if (!privateKey) {\n    throw new Error('private key is required');\n  }\n\n  const provider = new ethers.providers.JsonRpcProvider(providerUri);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  let data = message;\n\n  if (message.startsWith('0x')) {\n    data = ethers.utils.arrayify(message);\n  }\n\n  const signature = yield wallet.signMessage(data);\n  const address = exports.privateKeyToAddress(privateKey);\n  /*\n  const verified = verifySignature(message, signature, address)\n     if (!verified) {\n    throw new Error('signature produced is invalid')\n  }\n   */\n\n  return signature;\n});\n\nexports.debounce = (callback, time) => {\n  let interval;\n  return (...args) => {\n    clearTimeout(interval);\n    interval = setTimeout(() => {\n      interval = null;\n      callback(...args);\n    }, time);\n  };\n};\n\nexports.throttle = (fn, interval, limit = 1) => {\n  const queue = new Map();\n  let currentTick = 0;\n  let activeCount = 0;\n\n  const throttled = function (...args) {\n    let timeout;\n    return new Promise((resolve, reject) => {\n      const execute = () => {\n        resolve(fn.apply(this, args));\n        queue.delete(timeout);\n      };\n\n      const now = Date.now();\n\n      if (now - currentTick > interval) {\n        activeCount = 1;\n        currentTick = now;\n        timeout = setTimeout(execute, currentTick - now);\n      } else if (activeCount < limit) {\n        activeCount++;\n      } else {\n        activeCount = 1;\n      }\n\n      queue.set(timeout, reject);\n    });\n  };\n\n  return throttled;\n};\n\nexports.getQueryParamValue = name => {\n  const query = window.location.search.substr(1);\n  const params = querystring_1.default.parse(query);\n\n  if (params[name]) {\n    return params[name];\n  }\n\n  return null;\n};\n\nexports.removeQueryParam = (key, url = window.location.href) => {\n  try {\n    const u = new URL(url);\n\n    if ('URLSearchParams' in window) {\n      const searchParams = new URLSearchParams(u.search);\n      searchParams.delete(key);\n      u.search = searchParams.toString();\n      return u.toString();\n    }\n  } catch (err) {// noop\n  }\n\n  return url;\n};\n\nexports.updateQueryParams = (params = {}, url = window.location.href) => {\n  try {\n    const u = new URL(url);\n\n    if ('URLSearchParams' in window) {\n      const searchParams = new URLSearchParams(u.search);\n\n      for (let key in params) {\n        const value = params[key];\n\n        if (!value) {\n          continue;\n        }\n\n        searchParams.set(key, value);\n      }\n\n      u.search = searchParams.toString();\n      return u.toString();\n    }\n  } catch (err) {// noop\n  }\n\n  return url;\n};\n\nexports.replaceWindowUrl = newUrl => {\n  try {\n    window.history.replaceState({}, document.title, newUrl);\n  } catch (err) {// noop\n  }\n};\n\nexports.browserInfo = () => {\n  let ret;\n  let tmp;\n  let ua = navigator.userAgent;\n  let m = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n\n  if (/trident/i.test(m[1])) {\n    tmp = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    ret = 'IE ' + (tmp[1] || '');\n  }\n\n  if (m[1] === 'Chrome') {\n    tmp = ua.match(/\\b(OPR|Edge?)\\/(\\d+)/);\n\n    if (tmp != null) {\n      ret = tmp.slice(1).join(' ').replace('OPR', 'Opera').replace('Edg ', 'Edge ');\n    }\n  }\n\n  m = m[2] ? [m[1], m[2]] : [navigator.appName, navigator.appVersion, '-?'];\n  let v = (tmp = ua.match(/version\\/(\\d+)/i)) != null;\n\n  if (v) {\n    m.splice(1, 1, tmp[1]);\n  }\n\n  ret = m.join(' ');\n  let p = ret.split(' ');\n  return {\n    browser: p[0],\n    version: p[1]\n  };\n};\n\nexports.exportRecoveryParam = recoveryParam => {\n  return typeof recoveryParam === 'number' ? new bn_js_1.default(recoveryParam).add(new bn_js_1.default(27)).toString(16) : null;\n};\n\nexports.importRecoveryParam = v => {\n  return v.trim() ? new bn_js_1.default(v, 16).sub(new bn_js_1.default(27)).toNumber() : undefined;\n};","map":{"version":3,"sources":["/Users/untitled/challenge-4-single-pool-dex/node_modules/authereum/dist/utils.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importStar","mod","__esModule","k","Object","hasOwnProperty","call","__importDefault","defineProperty","exports","_privToAddress","require","ethers","to_hex_1","uuidlib","querystring_1","bn_js_1","uuid","uuidv4","privateKeyToAddress","wait","t","setTimeout","toHex","opts","addPrefix","undefined","default","signWithPrivateKey","message","privateKey","providerUri","Error","provider","providers","JsonRpcProvider","wallet","Wallet","data","startsWith","utils","arrayify","signature","signMessage","address","debounce","callback","time","interval","args","clearTimeout","throttle","fn","limit","queue","Map","currentTick","activeCount","throttled","timeout","execute","delete","now","Date","set","getQueryParamValue","name","query","window","location","search","substr","params","parse","removeQueryParam","key","url","href","u","URL","searchParams","URLSearchParams","toString","err","updateQueryParams","replaceWindowUrl","newUrl","history","replaceState","document","title","browserInfo","ret","tmp","ua","navigator","userAgent","m","match","test","exec","slice","join","replace","appName","appVersion","v","splice","p","split","browser","version","exportRecoveryParam","recoveryParam","add","importRecoveryParam","trim","sub","toNumber"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// some imports must use wildcard for it to work with rollupjs\nconst _privToAddress = __importStar(require(\"ethereum-private-key-to-address\"));\nconst ethers = __importStar(require(\"ethers\"));\nconst to_hex_1 = __importDefault(require(\"to-hex\"));\nconst uuidlib = __importStar(require(\"uuidv4\"));\nconst querystring_1 = __importDefault(require(\"querystring\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst { uuid } = uuidlib;\nexports.uuidv4 = uuid;\nexports.privateKeyToAddress = _privToAddress;\nexports.wait = (t) => __awaiter(void 0, void 0, void 0, function* () {\n    return new Promise(resolve => setTimeout(() => resolve(), t));\n});\nexports.toHex = (value, opts = {}) => {\n    if (opts.addPrefix === undefined) {\n        opts.addPrefix = true;\n    }\n    opts.default = 0;\n    return to_hex_1.default(value, opts);\n};\nexports.signWithPrivateKey = (message, privateKey, providerUri) => __awaiter(void 0, void 0, void 0, function* () {\n    if (!privateKey) {\n        throw new Error('private key is required');\n    }\n    const provider = new ethers.providers.JsonRpcProvider(providerUri);\n    const wallet = new ethers.Wallet(privateKey, provider);\n    let data = message;\n    if (message.startsWith('0x')) {\n        data = ethers.utils.arrayify(message);\n    }\n    const signature = yield wallet.signMessage(data);\n    const address = exports.privateKeyToAddress(privateKey);\n    /*\n    const verified = verifySignature(message, signature, address)\n  \n    if (!verified) {\n      throw new Error('signature produced is invalid')\n    }\n     */\n    return signature;\n});\nexports.debounce = (callback, time) => {\n    let interval;\n    return (...args) => {\n        clearTimeout(interval);\n        interval = setTimeout(() => {\n            interval = null;\n            callback(...args);\n        }, time);\n    };\n};\nexports.throttle = (fn, interval, limit = 1) => {\n    const queue = new Map();\n    let currentTick = 0;\n    let activeCount = 0;\n    const throttled = function (...args) {\n        let timeout;\n        return new Promise((resolve, reject) => {\n            const execute = () => {\n                resolve(fn.apply(this, args));\n                queue.delete(timeout);\n            };\n            const now = Date.now();\n            if ((now - currentTick) > interval) {\n                activeCount = 1;\n                currentTick = now;\n                timeout = setTimeout(execute, currentTick - now);\n            }\n            else if (activeCount < limit) {\n                activeCount++;\n            }\n            else {\n                activeCount = 1;\n            }\n            queue.set(timeout, reject);\n        });\n    };\n    return throttled;\n};\nexports.getQueryParamValue = (name) => {\n    const query = window.location.search.substr(1);\n    const params = querystring_1.default.parse(query);\n    if (params[name]) {\n        return params[name];\n    }\n    return null;\n};\nexports.removeQueryParam = (key, url = window.location.href) => {\n    try {\n        const u = new URL(url);\n        if ('URLSearchParams' in window) {\n            const searchParams = new URLSearchParams(u.search);\n            searchParams.delete(key);\n            u.search = searchParams.toString();\n            return u.toString();\n        }\n    }\n    catch (err) {\n        // noop\n    }\n    return url;\n};\nexports.updateQueryParams = (params = {}, url = window.location.href) => {\n    try {\n        const u = new URL(url);\n        if ('URLSearchParams' in window) {\n            const searchParams = new URLSearchParams(u.search);\n            for (let key in params) {\n                const value = params[key];\n                if (!value) {\n                    continue;\n                }\n                searchParams.set(key, value);\n            }\n            u.search = searchParams.toString();\n            return u.toString();\n        }\n    }\n    catch (err) {\n        // noop\n    }\n    return url;\n};\nexports.replaceWindowUrl = (newUrl) => {\n    try {\n        window.history.replaceState({}, document.title, newUrl);\n    }\n    catch (err) {\n        // noop\n    }\n};\nexports.browserInfo = () => {\n    let ret;\n    let tmp;\n    let ua = navigator.userAgent;\n    let m = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(m[1])) {\n        tmp = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n        ret = 'IE ' + (tmp[1] || '');\n    }\n    if (m[1] === 'Chrome') {\n        tmp = ua.match(/\\b(OPR|Edge?)\\/(\\d+)/);\n        if (tmp != null) {\n            ret = tmp.slice(1).join(' ').replace('OPR', 'Opera').replace('Edg ', 'Edge ');\n        }\n    }\n    m = m[2] ? [m[1], m[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    let v = (tmp = ua.match(/version\\/(\\d+)/i)) != null;\n    if (v) {\n        m.splice(1, 1, tmp[1]);\n    }\n    ret = m.join(' ');\n    let p = ret.split(' ');\n    return {\n        browser: p[0],\n        version: p[1]\n    };\n};\nexports.exportRecoveryParam = (recoveryParam) => {\n    return typeof recoveryParam === 'number'\n        ? new bn_js_1.default(recoveryParam).add(new bn_js_1.default(27)).toString(16)\n        : null;\n};\nexports.importRecoveryParam = (v) => {\n    return v.trim() ? new bn_js_1.default(v, 16).sub(new bn_js_1.default(27)).toNumber() : undefined;\n};\n"]},"metadata":{},"sourceType":"script"}