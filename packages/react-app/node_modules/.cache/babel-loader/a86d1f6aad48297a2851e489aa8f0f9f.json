{"ast":null,"code":"var _jsxFileName = \"/Users/untitled/challenge-4-single-pool-dex/packages/react-app/src/components/Curve.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Curve(props) {\n  _s();\n\n  let ref = useRef();\n\n  const drawArrow = (ctx, x1, y1, x2, y2) => {\n    let [dx, dy] = [x1 - x2, y1 - y2];\n    let norm = Math.sqrt(dx * dx + dy * dy);\n    let [udx, udy] = [dx / norm, dy / norm];\n    const size = norm / 7;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    ctx.moveTo(x2, y2);\n    ctx.lineTo(x2 + udx * size - udy * size, y2 + udx * size + udy * size);\n    ctx.moveTo(x2, y2);\n    ctx.lineTo(x2 + udx * size + udy * size, y2 - udx * size + udy * size);\n    ctx.stroke();\n  };\n\n  useEffect(() => {\n    let canvas = ref.current;\n    const textSize = 12;\n    const width = canvas.width;\n    const height = canvas.height;\n\n    if (canvas.getContext && props.ethReserve && props.tokenReserve) {\n      const k = props.ethReserve * props.tokenReserve;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, width, height);\n      let maxX = k / (props.ethReserve / 4);\n      let minX = 0;\n\n      if (props.addingEth || props.addingToken) {\n        maxX = k / (props.ethReserve * 0.4); //maxX = k/(props.ethReserve*0.8)\n\n        minX = k / Math.max(0, 500 - props.ethReserve);\n      }\n\n      const maxY = maxX * height / width;\n      const minY = minX * height / width;\n\n      const plotX = x => {\n        return (x - minX) / (maxX - minX) * width;\n      };\n\n      const plotY = y => {\n        return height - (y - minY) / (maxY - minY) * height;\n      };\n\n      ctx.strokeStyle = \"#000000\";\n      ctx.fillStyle = \"#000000\";\n      ctx.font = textSize + \"px Arial\"; // +Y axis\n\n      ctx.beginPath();\n      ctx.moveTo(plotX(minX), plotY(0));\n      ctx.lineTo(plotX(minX), plotY(maxY));\n      ctx.stroke(); // +X axis\n\n      ctx.beginPath();\n      ctx.moveTo(plotX(0), plotY(minY));\n      ctx.lineTo(plotX(maxX), plotY(minY));\n      ctx.stroke();\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      let first = true;\n\n      for (var x = minX; x <= maxX; x += maxX / width) {\n        /////\n        var y = k / x; /////\n\n        if (first) {\n          ctx.moveTo(plotX(x), plotY(y));\n          first = false;\n        } else {\n          ctx.lineTo(plotX(x), plotY(y));\n        }\n      }\n\n      ctx.stroke();\n      ctx.lineWidth = 1;\n\n      if (props.addingEth) {\n        let newEthReserve = props.ethReserve + parseFloat(props.addingEth);\n        ctx.fillStyle = \"#bbbbbb\";\n        ctx.beginPath();\n        ctx.arc(plotX(newEthReserve), plotY(k / newEthReserve), 5, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.strokeStyle = \"#009900\";\n        drawArrow(ctx, plotX(props.ethReserve), plotY(props.tokenReserve), plotX(newEthReserve), plotY(props.tokenReserve));\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\"\" + props.addingEth + \" ETH input\", plotX(props.ethReserve) + textSize, plotY(props.tokenReserve) - textSize);\n        ctx.strokeStyle = \"#990000\";\n        drawArrow(ctx, plotX(newEthReserve), plotY(props.tokenReserve), plotX(newEthReserve), plotY(k / newEthReserve));\n        let amountGained = Math.round(10000 * (props.addingEth * props.tokenReserve) / newEthReserve) / 10000;\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\"\" + amountGained + \" ðŸŽˆ output (-0.3% fee)\", plotX(newEthReserve) + textSize, plotY(k / newEthReserve));\n      } else if (props.addingToken) {\n        let newTokenReserve = props.tokenReserve + parseFloat(props.addingToken);\n        ctx.fillStyle = \"#bbbbbb\";\n        ctx.beginPath();\n        ctx.arc(plotX(k / newTokenReserve), plotY(newTokenReserve), 5, 0, 2 * Math.PI);\n        ctx.fill(); //console.log(\"newTokenReserve\",newTokenReserve)\n\n        ctx.strokeStyle = \"#990000\";\n        drawArrow(ctx, plotX(props.ethReserve), plotY(props.tokenReserve), plotX(props.ethReserve), plotY(newTokenReserve));\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\"\" + props.addingToken + \" ðŸŽˆ input\", plotX(props.ethReserve) + textSize, plotY(props.tokenReserve));\n        ctx.strokeStyle = \"#009900\";\n        drawArrow(ctx, plotX(props.ethReserve), plotY(newTokenReserve), plotX(k / newTokenReserve), plotY(newTokenReserve));\n        let amountGained = Math.round(10000 * (props.addingToken * props.ethReserve) / newTokenReserve) / 10000; //console.log(\"amountGained\",amountGained)\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\"\" + amountGained + \" ETH output (-0.3% fee)\", plotX(k / newTokenReserve) + textSize, plotY(newTokenReserve) - textSize);\n      }\n\n      ctx.fillStyle = \"#0000FF\";\n      ctx.beginPath();\n      ctx.arc(plotX(props.ethReserve), plotY(props.tokenReserve), 5, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [props]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      width: props.width,\n      height: props.height\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      style: {\n        position: \"absolute\",\n        left: 0,\n        top: 0\n      },\n      ref: ref,\n      width: props.width,\n      height: props.height\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: \"20%\",\n        bottom: -20\n      },\n      children: \"-- ETH Reserve -->\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: -20,\n        bottom: \"20%\",\n        transform: \"rotate(-90deg)\",\n        transformOrigin: \"0 0\"\n      },\n      children: \"-- Token Reserve -->\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Curve, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\n_c = Curve;\n\nvar _c;\n\n$RefreshReg$(_c, \"Curve\");","map":{"version":3,"sources":["/Users/untitled/challenge-4-single-pool-dex/packages/react-app/src/components/Curve.jsx"],"names":["React","useRef","useEffect","Curve","props","ref","drawArrow","ctx","x1","y1","x2","y2","dx","dy","norm","Math","sqrt","udx","udy","size","beginPath","moveTo","lineTo","stroke","canvas","current","textSize","width","height","getContext","ethReserve","tokenReserve","k","clearRect","maxX","minX","addingEth","addingToken","max","maxY","minY","plotX","x","plotY","y","strokeStyle","fillStyle","font","lineWidth","first","newEthReserve","parseFloat","arc","PI","fill","fillText","amountGained","round","newTokenReserve","position","left","top","bottom","transform","transformOrigin"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from \"react\";\n\nexport default function Curve(props) {\n  let ref = useRef();\n\n  const drawArrow = (ctx, x1, y1, x2, y2) => {\n    let [dx, dy] = [x1 - x2, y1 - y2];\n    let norm = Math.sqrt(dx * dx + dy * dy);\n    let [udx, udy] = [dx / norm, dy / norm];\n    const size = norm / 7;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    ctx.moveTo(x2, y2);\n    ctx.lineTo(x2 + udx * size - udy * size, y2 + udx * size + udy * size);\n    ctx.moveTo(x2, y2);\n    ctx.lineTo(x2 + udx * size + udy * size, y2 - udx * size + udy * size);\n    ctx.stroke();\n  };\n\n  useEffect(() => {\n    let canvas = ref.current;\n\n    const textSize = 12;\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    if (canvas.getContext && props.ethReserve && props.tokenReserve) {\n      const k = props.ethReserve * props.tokenReserve;\n\n      const ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, width, height);\n\n      let maxX = k / (props.ethReserve / 4);\n      let minX = 0;\n\n      if (props.addingEth || props.addingToken) {\n        maxX = k / (props.ethReserve * 0.4);\n        //maxX = k/(props.ethReserve*0.8)\n        minX = k / Math.max(0, 500 - props.ethReserve);\n      }\n\n      const maxY = (maxX * height) / width;\n      const minY = (minX * height) / width;\n\n      const plotX = x => {\n        return ((x - minX) / (maxX - minX)) * width;\n      };\n\n      const plotY = y => {\n        return height - ((y - minY) / (maxY - minY)) * height;\n      };\n      ctx.strokeStyle = \"#000000\";\n      ctx.fillStyle = \"#000000\";\n      ctx.font = textSize + \"px Arial\";\n      // +Y axis\n      ctx.beginPath();\n      ctx.moveTo(plotX(minX), plotY(0));\n      ctx.lineTo(plotX(minX), plotY(maxY));\n      ctx.stroke();\n      // +X axis\n      ctx.beginPath();\n      ctx.moveTo(plotX(0), plotY(minY));\n      ctx.lineTo(plotX(maxX), plotY(minY));\n      ctx.stroke();\n\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      let first = true;\n      for (var x = minX; x <= maxX; x += maxX / width) {\n        /////\n        var y = k / x;\n        /////\n        if (first) {\n          ctx.moveTo(plotX(x), plotY(y));\n          first = false;\n        } else {\n          ctx.lineTo(plotX(x), plotY(y));\n        }\n      }\n      ctx.stroke();\n\n      ctx.lineWidth = 1;\n\n      if (props.addingEth) {\n        let newEthReserve = props.ethReserve + parseFloat(props.addingEth);\n\n        ctx.fillStyle = \"#bbbbbb\";\n        ctx.beginPath();\n        ctx.arc(plotX(newEthReserve), plotY(k / newEthReserve), 5, 0, 2 * Math.PI);\n        ctx.fill();\n\n        ctx.strokeStyle = \"#009900\";\n        drawArrow(\n          ctx,\n          plotX(props.ethReserve),\n          plotY(props.tokenReserve),\n          plotX(newEthReserve),\n          plotY(props.tokenReserve),\n        );\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\n          \"\" + props.addingEth + \" ETH input\",\n          plotX(props.ethReserve) + textSize,\n          plotY(props.tokenReserve) - textSize,\n        );\n\n        ctx.strokeStyle = \"#990000\";\n        drawArrow(ctx, plotX(newEthReserve), plotY(props.tokenReserve), plotX(newEthReserve), plotY(k / newEthReserve));\n\n        let amountGained = Math.round((10000 * (props.addingEth * props.tokenReserve)) / newEthReserve) / 10000;\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\n          \"\" + amountGained + \" ðŸŽˆ output (-0.3% fee)\",\n          plotX(newEthReserve) + textSize,\n          plotY(k / newEthReserve),\n        );\n      } else if (props.addingToken) {\n        let newTokenReserve = props.tokenReserve + parseFloat(props.addingToken);\n\n        ctx.fillStyle = \"#bbbbbb\";\n        ctx.beginPath();\n        ctx.arc(plotX(k / newTokenReserve), plotY(newTokenReserve), 5, 0, 2 * Math.PI);\n        ctx.fill();\n\n        //console.log(\"newTokenReserve\",newTokenReserve)\n        ctx.strokeStyle = \"#990000\";\n        drawArrow(\n          ctx,\n          plotX(props.ethReserve),\n          plotY(props.tokenReserve),\n          plotX(props.ethReserve),\n          plotY(newTokenReserve),\n        );\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\n          \"\" + props.addingToken + \" ðŸŽˆ input\",\n          plotX(props.ethReserve) + textSize,\n          plotY(props.tokenReserve),\n        );\n\n        ctx.strokeStyle = \"#009900\";\n        drawArrow(\n          ctx,\n          plotX(props.ethReserve),\n          plotY(newTokenReserve),\n          plotX(k / newTokenReserve),\n          plotY(newTokenReserve),\n        );\n\n        let amountGained = Math.round((10000 * (props.addingToken * props.ethReserve)) / newTokenReserve) / 10000;\n        //console.log(\"amountGained\",amountGained)\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(\n          \"\" + amountGained + \" ETH output (-0.3% fee)\",\n          plotX(k / newTokenReserve) + textSize,\n          plotY(newTokenReserve) - textSize,\n        );\n      }\n\n      ctx.fillStyle = \"#0000FF\";\n      ctx.beginPath();\n      ctx.arc(plotX(props.ethReserve), plotY(props.tokenReserve), 5, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [props]);\n\n  return (\n    <div style={{ position: \"relative\", width: props.width, height: props.height }}>\n      <canvas style={{ position: \"absolute\", left: 0, top: 0 }} ref={ref} width={props.width} height={props.height} />\n      <div style={{ position: \"absolute\", left: \"20%\", bottom: -20 }}>-- ETH Reserve --></div>\n      <div\n        style={{ position: \"absolute\", left: -20, bottom: \"20%\", transform: \"rotate(-90deg)\", transformOrigin: \"0 0\" }}\n      >\n        -- Token Reserve -->\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}