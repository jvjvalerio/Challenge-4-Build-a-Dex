{"ast":null,"code":"import _slicedToArray from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Card}from\"antd\";import React,{useMemo,useState}from\"react\";import{useContractExistsAtAddress,useContractLoader}from\"eth-hooks\";import Account from\"../Account\";import DisplayVariable from\"./DisplayVariable\";import FunctionForm from\"./FunctionForm\";import Address from\"../Address\";import Balance from\"../Balance\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var noContractDisplay=/*#__PURE__*/_jsxs(\"div\",{children:[\"Loading...\",\" \",/*#__PURE__*/_jsxs(\"div\",{style:{padding:32},children:[\"You need to run\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"},children:\"yarn run chain\"}),\" \",\"and\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"},children:\"yarn run deploy\"}),\" \",\"to see your contract here.\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:32},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:4},role:\"img\",\"aria-label\":\"warning\",children:\"\\u2622\\uFE0F\"}),\"Warning: You might need to run\",/*#__PURE__*/_jsx(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"},children:\"yarn run deploy\"}),\" \",/*#__PURE__*/_jsx(\"i\",{children:\"again\"}),\" after the frontend comes up!\"]})]});var isQueryable=function isQueryable(fn){return(fn.stateMutability===\"view\"||fn.stateMutability===\"pure\")&&fn.inputs.length===0;};export default function Contract(_ref){var customContract=_ref.customContract,account=_ref.account,gasPrice=_ref.gasPrice,signer=_ref.signer,provider=_ref.provider,name=_ref.name,show=_ref.show,price=_ref.price,blockExplorer=_ref.blockExplorer,chainId=_ref.chainId,contractConfig=_ref.contractConfig;var contracts=useContractLoader(provider,contractConfig,chainId);var contract;if(!customContract){contract=contracts?contracts[name]:\"\";}else{contract=customContract;}var address=contract?contract.address:\"\";var contractIsDeployed=useContractExistsAtAddress(provider,address);var displayedContractFunctions=useMemo(function(){var results=contract?Object.entries(contract.interface.functions).filter(function(fn){return fn[1][\"type\"]===\"function\"&&!(show&&show.indexOf(fn[1][\"name\"])<0);}):[];return results;},[contract,show]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),refreshRequired=_useState2[0],triggerRefresh=_useState2[1];var contractDisplay=displayedContractFunctions.map(function(contractFuncInfo){var contractFunc=contractFuncInfo[1].stateMutability===\"view\"||contractFuncInfo[1].stateMutability===\"pure\"?contract[contractFuncInfo[0]]:contract.connect(signer)[contractFuncInfo[0]];if(typeof contractFunc===\"function\"){if(isQueryable(contractFuncInfo[1])){// If there are no inputs, just display return value\nreturn/*#__PURE__*/_jsx(DisplayVariable,{contractFunction:contractFunc,functionInfo:contractFuncInfo[1],refreshRequired:refreshRequired,triggerRefresh:triggerRefresh,blockExplorer:blockExplorer},contractFuncInfo[1].name);}// If there are inputs, display a form to allow users to provide these\nreturn/*#__PURE__*/_jsx(FunctionForm,{contractFunction:contractFunc,functionInfo:contractFuncInfo[1],provider:provider,gasPrice:gasPrice,triggerRefresh:triggerRefresh},\"FF\"+contractFuncInfo[0]);}return null;});return/*#__PURE__*/_jsx(\"div\",{style:{margin:\"auto\",width:\"70vw\"},children:/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24},children:[name,/*#__PURE__*/_jsx(\"div\",{style:{float:\"right\"},children:/*#__PURE__*/_jsx(Address,{value:address})}),/*#__PURE__*/_jsx(\"div\",{style:{float:\"right\",marginRight:25},children:/*#__PURE__*/_jsx(Balance,{address:address,provider:provider,price:price})})]}),size:\"large\",style:{marginTop:25,width:\"100%\"},loading:contractDisplay&&contractDisplay.length<=0,children:contractIsDeployed?contractDisplay:noContractDisplay})});}","map":{"version":3,"sources":["/Users/untitled/challenge-4-single-pool-dex/packages/react-app/src/components/Contract/index.jsx"],"names":["Card","React","useMemo","useState","useContractExistsAtAddress","useContractLoader","Account","DisplayVariable","FunctionForm","Address","Balance","noContractDisplay","padding","marginLeft","borderRadius","fontWeight","marginRight","isQueryable","fn","stateMutability","inputs","length","Contract","customContract","account","gasPrice","signer","provider","name","show","price","blockExplorer","chainId","contractConfig","contracts","contract","address","contractIsDeployed","displayedContractFunctions","results","Object","entries","interface","functions","filter","indexOf","refreshRequired","triggerRefresh","contractDisplay","map","contractFuncInfo","contractFunc","connect","margin","width","fontSize","float","marginTop"],"mappings":"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","sourcesContent":["import { Card } from \"antd\";\nimport React, { useMemo, useState } from \"react\";\nimport { useContractExistsAtAddress, useContractLoader } from \"eth-hooks\";\nimport Account from \"../Account\";\nimport DisplayVariable from \"./DisplayVariable\";\nimport FunctionForm from \"./FunctionForm\";\nimport Address from \"../Address\";\nimport Balance from \"../Balance\";\n\nconst noContractDisplay = (\n  <div>\n    Loading...{\" \"}\n    <div style={{ padding: 32 }}>\n      You need to run{\" \"}\n      <span\n        className=\"highlight\"\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\n      >\n        yarn run chain\n      </span>{\" \"}\n      and{\" \"}\n      <span\n        className=\"highlight\"\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\n      >\n        yarn run deploy\n      </span>{\" \"}\n      to see your contract here.\n    </div>\n    <div style={{ padding: 32 }}>\n      <span style={{ marginRight: 4 }} role=\"img\" aria-label=\"warning\">\n        ☢️\n      </span>\n      Warning: You might need to run\n      <span\n        className=\"highlight\"\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\n      >\n        yarn run deploy\n      </span>{\" \"}\n      <i>again</i> after the frontend comes up!\n    </div>\n  </div>\n);\n\nconst isQueryable = fn => (fn.stateMutability === \"view\" || fn.stateMutability === \"pure\") && fn.inputs.length === 0;\n\nexport default function Contract({\n  customContract,\n  account,\n  gasPrice,\n  signer,\n  provider,\n  name,\n  show,\n  price,\n  blockExplorer,\n  chainId,\n  contractConfig,\n}) {\n  const contracts = useContractLoader(provider, contractConfig, chainId);\n  let contract;\n  if (!customContract) {\n    contract = contracts ? contracts[name] : \"\";\n  } else {\n    contract = customContract;\n  }\n\n  const address = contract ? contract.address : \"\";\n  const contractIsDeployed = useContractExistsAtAddress(provider, address);\n\n  const displayedContractFunctions = useMemo(() => {\n    const results = contract\n      ? Object.entries(contract.interface.functions).filter(\n          fn => fn[1][\"type\"] === \"function\" && !(show && show.indexOf(fn[1][\"name\"]) < 0),\n        )\n      : [];\n    return results;\n  }, [contract, show]);\n\n  const [refreshRequired, triggerRefresh] = useState(false);\n  const contractDisplay = displayedContractFunctions.map(contractFuncInfo => {\n    const contractFunc =\n      contractFuncInfo[1].stateMutability === \"view\" || contractFuncInfo[1].stateMutability === \"pure\"\n        ? contract[contractFuncInfo[0]]\n        : contract.connect(signer)[contractFuncInfo[0]];\n\n    if (typeof contractFunc === \"function\") {\n      if (isQueryable(contractFuncInfo[1])) {\n        // If there are no inputs, just display return value\n        return (\n          <DisplayVariable\n            key={contractFuncInfo[1].name}\n            contractFunction={contractFunc}\n            functionInfo={contractFuncInfo[1]}\n            refreshRequired={refreshRequired}\n            triggerRefresh={triggerRefresh}\n            blockExplorer={blockExplorer}\n          />\n        );\n      }\n\n      // If there are inputs, display a form to allow users to provide these\n      return (\n        <FunctionForm\n          key={\"FF\" + contractFuncInfo[0]}\n          contractFunction={contractFunc}\n          functionInfo={contractFuncInfo[1]}\n          provider={provider}\n          gasPrice={gasPrice}\n          triggerRefresh={triggerRefresh}\n        />\n      );\n    }\n    return null;\n  });\n\n  return (\n    <div style={{ margin: \"auto\", width: \"70vw\" }}>\n      <Card\n        title={\n          <div style={{ fontSize: 24 }}>\n            {name}\n            <div style={{ float: \"right\" }}>\n              <Address value={address} />\n            </div>\n            <div style={{ float: \"right\", marginRight: 25 }}>\n              <Balance address={address} provider={provider} price={price} />\n            </div>\n          </div>\n        }\n        size=\"large\"\n        style={{ marginTop: 25, width: \"100%\" }}\n        loading={contractDisplay && contractDisplay.length <= 0}\n      >\n        {contractIsDeployed ? contractDisplay : noContractDisplay}\n      </Card>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}