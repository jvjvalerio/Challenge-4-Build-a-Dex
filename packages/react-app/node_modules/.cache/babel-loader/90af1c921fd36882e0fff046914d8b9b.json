{"ast":null,"code":"import _toConsumableArray from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/untitled/challenge-4-single-pool-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Col,Divider,Input,Row,Tooltip}from\"antd\";import React,{useState}from\"react\";import Blockies from\"react-blockies\";import{Transactor}from\"../../helpers\";import{tryToDisplay,tryToDisplayAsText}from\"./utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),utils=_require.utils,BigNumber=_require.BigNumber;var getFunctionInputKey=function getFunctionInputKey(functionInfo,input,inputIndex){var name=(input===null||input===void 0?void 0:input.name)?input.name:\"input_\"+inputIndex+\"_\";return functionInfo.name+\"_\"+name+\"_\"+input.type;};export default function FunctionForm(_ref){var contractFunction=_ref.contractFunction,functionInfo=_ref.functionInfo,provider=_ref.provider,gasPrice=_ref.gasPrice,triggerRefresh=_ref.triggerRefresh;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),txValue=_useState4[0],setTxValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),returnValue=_useState6[0],setReturnValue=_useState6[1];var tx=Transactor(provider,gasPrice);var inputs=functionInfo.inputs.map(function(input,inputIndex){var key=getFunctionInputKey(functionInfo,input,inputIndex);var buttons=\"\";if(input.type===\"bytes32\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to bytes32\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formUpdate,_formUpdate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseBytes32String(form[key]);setForm(formUpdate);}else{_formUpdate=_objectSpread({},form);_formUpdate[key]=utils.formatBytes32String(form[key]);setForm(_formUpdate);}case 1:case\"end\":return _context.stop();}}},_callee);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"bytes\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var formUpdate,_formUpdate2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.toUtf8String(form[key]);setForm(formUpdate);}else{_formUpdate2=_objectSpread({},form);_formUpdate2[key]=utils.hexlify(utils.toUtf8Bytes(form[key]));setForm(_formUpdate2);}case 1:case\"end\":return _context2.stop();}}},_callee2);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"uint256\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"* 10 ** 18\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var formUpdate;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseEther(form[key]);setForm(formUpdate);case 3:case\"end\":return _context3.stop();}}},_callee3);})),children:\"\\u2734\\uFE0F\"})});}else if(input.type===\"address\"){var possibleAddress=form[key]&&form[key].toLowerCase&&form[key].toLowerCase().trim();if(possibleAddress&&possibleAddress.length===42){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"blockie\",children:/*#__PURE__*/_jsx(Blockies,{seed:possibleAddress,scale:3})});}}return/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:input.name?input.type+\" \"+input.name:input.type,autoComplete:\"off\",value:form[key],name:key,onChange:function onChange(event){var formUpdate=_objectSpread({},form);formUpdate[event.target.name]=event.target.value;setForm(formUpdate);},suffix:buttons})},key);});var txValueInput=/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{placeholder:\"transaction value\",onChange:function onChange(e){return setTxValue(e.target.value);},value:txValue,addonAfter:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\" * 10^18 \",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var floatValue;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:floatValue=parseFloat(txValue);if(floatValue)setTxValue(\"\"+floatValue*Math.pow(10,18));case 2:case\"end\":return _context4.stop();}}},_callee4);})),children:\"\\u2733\\uFE0F\"})})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"number to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setTxValue(BigNumber.from(txValue).toHexString());case 1:case\"end\":return _context5.stop();}}},_callee5);})),children:\"#\\uFE0F\\u20E3\"})})})]})})})},\"txValueInput\");if(functionInfo.payable){inputs.push(txValueInput);}var handleForm=function handleForm(returned){if(returned){setForm({});}};var buttonIcon=functionInfo.type===\"call\"?/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Read\\uD83D\\uDCE1\"}):/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Send\\uD83D\\uDCB8\"});inputs.push(/*#__PURE__*/_jsx(\"div\",{style:{cursor:\"pointer\",margin:2},children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setReturnValue(e.target.value);},defaultValue:\"\",bordered:false,disabled:true,value:returnValue,suffix:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:30,margin:0},type:\"default\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var args,result,returned,overrides,_returned;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:args=functionInfo.inputs.map(function(input,inputIndex){var key=getFunctionInputKey(functionInfo,input,inputIndex);var value=form[key];if(input.baseType===\"array\"){value=JSON.parse(value);}else if(input.type===\"bool\"){if(value===\"true\"||value===\"1\"||value===\"0x1\"||value===\"0x01\"||value===\"0x0001\"){value=1;}else{value=0;}}return value;});if(!(functionInfo.stateMutability===\"view\"||functionInfo.stateMutability===\"pure\")){_context6.next=15;break;}_context6.prev=2;_context6.next=5;return contractFunction.apply(void 0,_toConsumableArray(args));case 5:returned=_context6.sent;handleForm(returned);result=tryToDisplayAsText(returned);_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);console.error(_context6.t0);case 13:_context6.next=23;break;case 15:overrides={};if(txValue){overrides.value=txValue;// ethers.utils.parseEther()\n}if(gasPrice){overrides.gasPrice=gasPrice;}// Uncomment this if you want to skip the gas estimation for each transaction\n// overrides.gasLimit = hexlify(1200000);\n// console.log(\"Running with extras\",extras)\n_context6.next=20;return tx(contractFunction.apply(void 0,_toConsumableArray(args).concat([overrides])));case 20:_returned=_context6.sent;handleForm(_returned);result=tryToDisplay(_returned);case 23:console.log(\"SETTING RESULT:\",result);setReturnValue(result);triggerRefresh(true);case 26:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);})),children:buttonIcon})})},\"goButton\"));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:8,style:{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24},children:functionInfo.name}),/*#__PURE__*/_jsx(Col,{span:16,children:inputs})]}),/*#__PURE__*/_jsx(Divider,{})]});}","map":{"version":3,"sources":["/Users/untitled/challenge-4-single-pool-dex/packages/react-app/src/components/Contract/FunctionForm.jsx"],"names":["Button","Col","Divider","Input","Row","Tooltip","React","useState","Blockies","Transactor","tryToDisplay","tryToDisplayAsText","require","utils","BigNumber","getFunctionInputKey","functionInfo","input","inputIndex","name","type","FunctionForm","contractFunction","provider","gasPrice","triggerRefresh","form","setForm","txValue","setTxValue","returnValue","setReturnValue","tx","inputs","map","key","buttons","cursor","isHexString","formUpdate","parseBytes32String","formatBytes32String","toUtf8String","hexlify","toUtf8Bytes","parseEther","possibleAddress","toLowerCase","trim","length","margin","event","target","value","txValueInput","e","floatValue","parseFloat","from","toHexString","payable","push","handleForm","returned","buttonIcon","marginLeft","width","height","args","baseType","JSON","parse","stateMutability","result","console","error","overrides","log","textAlign","opacity","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import { Button, Col, Divider, Input, Row, Tooltip } from \"antd\";\nimport React, { useState } from \"react\";\nimport Blockies from \"react-blockies\";\nimport { Transactor } from \"../../helpers\";\nimport { tryToDisplay, tryToDisplayAsText } from \"./utils\";\n\nconst { utils, BigNumber } = require(\"ethers\");\n\nconst getFunctionInputKey = (functionInfo, input, inputIndex) => {\n  const name = input?.name ? input.name : \"input_\" + inputIndex + \"_\";\n  return functionInfo.name + \"_\" + name + \"_\" + input.type;\n};\n\nexport default function FunctionForm({ contractFunction, functionInfo, provider, gasPrice, triggerRefresh }) {\n  const [form, setForm] = useState({});\n  const [txValue, setTxValue] = useState();\n  const [returnValue, setReturnValue] = useState();\n\n  const tx = Transactor(provider, gasPrice);\n\n  const inputs = functionInfo.inputs.map((input, inputIndex) => {\n    const key = getFunctionInputKey(functionInfo, input, inputIndex);\n\n    let buttons = \"\";\n    if (input.type === \"bytes32\") {\n      buttons = (\n        <Tooltip placement=\"right\" title=\"to bytes32\">\n          <div\n            type=\"dashed\"\n            style={{ cursor: \"pointer\" }}\n            onClick={async () => {\n              if (utils.isHexString(form[key])) {\n                const formUpdate = { ...form };\n                formUpdate[key] = utils.parseBytes32String(form[key]);\n                setForm(formUpdate);\n              } else {\n                const formUpdate = { ...form };\n                formUpdate[key] = utils.formatBytes32String(form[key]);\n                setForm(formUpdate);\n              }\n            }}\n          >\n            #️⃣\n          </div>\n        </Tooltip>\n      );\n    } else if (input.type === \"bytes\") {\n      buttons = (\n        <Tooltip placement=\"right\" title=\"to hex\">\n          <div\n            type=\"dashed\"\n            style={{ cursor: \"pointer\" }}\n            onClick={async () => {\n              if (utils.isHexString(form[key])) {\n                const formUpdate = { ...form };\n                formUpdate[key] = utils.toUtf8String(form[key]);\n                setForm(formUpdate);\n              } else {\n                const formUpdate = { ...form };\n                formUpdate[key] = utils.hexlify(utils.toUtf8Bytes(form[key]));\n                setForm(formUpdate);\n              }\n            }}\n          >\n            #️⃣\n          </div>\n        </Tooltip>\n      );\n    } else if (input.type === \"uint256\") {\n      buttons = (\n        <Tooltip placement=\"right\" title=\"* 10 ** 18\">\n          <div\n            type=\"dashed\"\n            style={{ cursor: \"pointer\" }}\n            onClick={async () => {\n              const formUpdate = { ...form };\n              formUpdate[key] = utils.parseEther(form[key]);\n              setForm(formUpdate);\n            }}\n          >\n            ✴️\n          </div>\n        </Tooltip>\n      );\n    } else if (input.type === \"address\") {\n      const possibleAddress = form[key] && form[key].toLowerCase && form[key].toLowerCase().trim();\n      if (possibleAddress && possibleAddress.length === 42) {\n        buttons = (\n          <Tooltip placement=\"right\" title=\"blockie\">\n            <Blockies seed={possibleAddress} scale={3} />\n          </Tooltip>\n        );\n      }\n    }\n\n    return (\n      <div style={{ margin: 2 }} key={key}>\n        <Input\n          size=\"large\"\n          placeholder={input.name ? input.type + \" \" + input.name : input.type}\n          autoComplete=\"off\"\n          value={form[key]}\n          name={key}\n          onChange={event => {\n            const formUpdate = { ...form };\n            formUpdate[event.target.name] = event.target.value;\n            setForm(formUpdate);\n          }}\n          suffix={buttons}\n        />\n      </div>\n    );\n  });\n\n  const txValueInput = (\n    <div style={{ margin: 2 }} key=\"txValueInput\">\n      <Input\n        placeholder=\"transaction value\"\n        onChange={e => setTxValue(e.target.value)}\n        value={txValue}\n        addonAfter={\n          <div>\n            <Row>\n              <Col span={16}>\n                <Tooltip placement=\"right\" title=\" * 10^18 \">\n                  <div\n                    type=\"dashed\"\n                    style={{ cursor: \"pointer\" }}\n                    onClick={async () => {\n                      const floatValue = parseFloat(txValue);\n                      if (floatValue) setTxValue(\"\" + floatValue * 10 ** 18);\n                    }}\n                  >\n                    ✳️\n                  </div>\n                </Tooltip>\n              </Col>\n              <Col span={16}>\n                <Tooltip placement=\"right\" title=\"number to hex\">\n                  <div\n                    type=\"dashed\"\n                    style={{ cursor: \"pointer\" }}\n                    onClick={async () => {\n                      setTxValue(BigNumber.from(txValue).toHexString());\n                    }}\n                  >\n                    #️⃣\n                  </div>\n                </Tooltip>\n              </Col>\n            </Row>\n          </div>\n        }\n      />\n    </div>\n  );\n\n  if (functionInfo.payable) {\n    inputs.push(txValueInput);\n  }\n\n  const handleForm = returned => {\n    if (returned) {\n      setForm({});\n    }\n  };\n\n  const buttonIcon =\n    functionInfo.type === \"call\" ? (\n      <Button style={{ marginLeft: -32 }}>Read📡</Button>\n    ) : (\n      <Button style={{ marginLeft: -32 }}>Send💸</Button>\n    );\n  inputs.push(\n    <div style={{ cursor: \"pointer\", margin: 2 }} key=\"goButton\">\n      <Input\n        onChange={e => setReturnValue(e.target.value)}\n        defaultValue=\"\"\n        bordered={false}\n        disabled\n        value={returnValue}\n        suffix={\n          <div\n            style={{ width: 50, height: 30, margin: 0 }}\n            type=\"default\"\n            onClick={async () => {\n              const args = functionInfo.inputs.map((input, inputIndex) => {\n                const key = getFunctionInputKey(functionInfo, input, inputIndex);\n                let value = form[key];\n                if (input.baseType === \"array\") {\n                  value = JSON.parse(value);\n                } else if (input.type === \"bool\") {\n                  if (value === \"true\" || value === \"1\" || value === \"0x1\" || value === \"0x01\" || value === \"0x0001\") {\n                    value = 1;\n                  } else {\n                    value = 0;\n                  }\n                }\n                return value;\n              });\n\n              let result;\n              if (functionInfo.stateMutability === \"view\" || functionInfo.stateMutability === \"pure\") {\n                try {\n                  const returned = await contractFunction(...args);\n                  handleForm(returned);\n                  result = tryToDisplayAsText(returned);\n                } catch (err) {\n                  console.error(err);\n                }\n              } else {\n                const overrides = {};\n                if (txValue) {\n                  overrides.value = txValue; // ethers.utils.parseEther()\n                }\n                if (gasPrice) {\n                  overrides.gasPrice = gasPrice;\n                }\n                // Uncomment this if you want to skip the gas estimation for each transaction\n                // overrides.gasLimit = hexlify(1200000);\n\n                // console.log(\"Running with extras\",extras)\n                const returned = await tx(contractFunction(...args, overrides));\n                handleForm(returned);\n                result = tryToDisplay(returned);\n              }\n\n              console.log(\"SETTING RESULT:\", result);\n              setReturnValue(result);\n              triggerRefresh(true);\n            }}\n          >\n            {buttonIcon}\n          </div>\n        }\n      />\n    </div>,\n  );\n\n  return (\n    <div>\n      <Row>\n        <Col\n          span={8}\n          style={{\n            textAlign: \"right\",\n            opacity: 0.333,\n            paddingRight: 6,\n            fontSize: 24,\n          }}\n        >\n          {functionInfo.name}\n        </Col>\n        <Col span={16}>{inputs}</Col>\n      </Row>\n      <Divider />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}